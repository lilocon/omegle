window.onerror=function(a,b,c){"undefined"===typeof _gaq&&(_gaq=[]);_gaq.push(["_trackEvent","JSerror",b+":"+c,a+""])};top.location!=document.location&&(top.location.href=document.location.href);var doStartFlash=0.5>Math.random(),IE_URL_MAX_LENGTH=2E3;"undefined"===typeof IS_MOBILE&&(IS_MOBILE=!1);var splitDomain=document.domain.split(".");1<splitDomain.length&&(document.domain=splitDomain[splitDomain.length-2]+"."+splitDomain[splitDomain.length-1]);var collegeJustEnabled=!1;
"#dormon"===window.location.hash&&(collegeJustEnabled=!0,window.location.hash="#",window.location.hash="");var aurrp=Cookie.read("aurrp"),aurrp=null===aurrp?!0:"1"===aurrp,shouldUseLikes=Cookie.read("uselikes"),shouldUseLikes=null===shouldUseLikes?!0:"1"===shouldUseLikes,shouldUseEnglish=Cookie.read("useenglish"),shouldUseEnglish=null===shouldUseEnglish?!1:"1"===shouldUseEnglish,randID=Cookie.read("randid");
if(!randID||8!==randID.length)randID=function(){for(var a="",b=0;8>b;b++)var c=Math.floor(32*Math.random()),a=a+"23456789ABCDEFGHJKLMNPQRSTUVWXYZ".charAt(c);return a}();Cookie.write("randid",randID,{duration:365,domain:document.domain,path:"/"});var collegeAndAuth=Cookie.read("college");
if(collegeAndAuth){if(Cookie.write("college",collegeAndAuth,{duration:365,domain:document.domain,path:"/"}),collegeAndAuth=JSON.decode(collegeAndAuth),"object"!==typeof collegeAndAuth||null===collegeAndAuth||2!==collegeAndAuth.length)collegeAndAuth=null}else collegeAndAuth=null;var collegeMode=Cookie.read("collegemode");"my"!==collegeMode&&("any"!==collegeMode&&"none"!==collegeMode)&&(collegeMode="any");
function setCollegeMode(a){collegeMode=a;Cookie.write("collegemode",collegeMode,{duration:365,domain:document.domain,path:"/"})}function clearCollegeSetting(){Cookie.write("college","",{duration:365,domain:document.domain,path:"/"});Cookie.write("collegemode","",{duration:365,domain:document.domain,path:"/"});collegeAndAuth=null;collegeMode="any"}
var shouldUseFbLikes,firstChatTrackCode=null,contentTop,logoElt,likeButtonElement=null,newChatButton=new Element("img",{width:170,height:50,alt:"New chat",styles:{cursor:"pointer","vertical-align":"middle"}});window.devicePixelRatio&&1<window.devicePixelRatio?newChatButton.set("src","/static/newchatbtn@2x.png"):newChatButton.set("src","/static/newchatbtn.png");var unmonSexyButton=null,unmonGayButton=null;
if(IS_MOBILE){var bwLogo=new Element("img",{width:77,height:16,alt:""});window.devicePixelRatio&&1<window.devicePixelRatio?bwLogo.set("src","/static/bwlogo@2x.png"):bwLogo.set("src","/static/bwlogo.png")}
var COMETBackend=new Class({Implements:[Options,Events],initialize:function(a){this.setOptions(a);this.clientID=null;this.stopped=!1},connect:function(a,b,c,d,e,f,n,g,r,p,u,x,s,D){var m=this;m.server=a;m.stratusNearID=b;m.askedQuestion=c;m.wantsSpy=d;m.canSaveQuestion=e;m.fbAccessToken=f;m.topics=n;m.group=g;m.lang=r;m.camera=p;m.enableWebRTC=u;m.college=x;m.collegeAuth=s;m.anyCollege=D;subdomainManager.subdomainWindow(a,function(a){m.reqWindow=a;m.gotReqWindow()})},resume:function(a,b){var c=this;
c.server=a;c.clientID=b;subdomainManager.subdomainWindow(a,function(a){c.reqWindow=a;c.getEvents()})},gotReqWindow:function(){var a=this,b=subdomainManager.fixUrl(a.server,"/start?rcs=1&firstevents=1&spid="+(a.stratusNearID||"")+"&randid="+randID+(IS_MOBILE?"&m=1":""));"string"===typeof a.askedQuestion&&(b+="&ask="+encodeURIComponent(a.askedQuestion));"string"===typeof a.fbAccessToken&&(b+="&fbaccesstoken="+encodeURIComponent(a.fbAccessToken));a.wantsSpy&&(b+="&wantsspy=1");a.canSaveQuestion&&(b+=
"&cansavequestion=1");a.topics&&a.topics.length&&(b+="&topics="+encodeURIComponent(JSON.encode(a.topics)));a.group&&(b+="&group="+encodeURIComponent(a.group));a.lang&&(b+="&lang="+encodeURIComponent(a.lang));a.camera&&(b+="&camera="+encodeURIComponent(a.camera));a.enableWebRTC&&(b+="&webrtc=1");a.college&&(b+="&college="+encodeURIComponent(a.college));a.collegeAuth&&(b+="&college_auth="+encodeURIComponent(a.collegeAuth));a.anyCollege&&(b+="&any_college=1");var c=null,d=killHeaders(new a.reqWindow.Request.JSON({url:b,
onSuccess:function(b){null!==c&&(clearTimeout(c),c=null);b.clientID?(a.clientID=b.clientID,a.fireEvent("connectedToServer"),b.events&&a.gotEvents(b.events),a.getEvents()):a.fireEvent("permanentlyFailedToConnect")},onFailure:function(){null!==c&&(clearTimeout(c),c=null);a.fireEvent("failedToConnect")}})),c=setTimeout(function(){c=null;d.cancel();a.fireEvent("failedToConnect")},15E3);d.post()},getEvents:function(a){void 0===a&&(a=0);if(!this.stopped){2<a&&(this.fireEvent("connectionDied","Lost contact with server, and couldn't reach it after 3 tries."),
this.stopped=!0);var b=this,c=null,d=killHeaders(new b.reqWindow.Request.JSON({url:subdomainManager.fixUrl(b.server,"/events"),onSuccess:function(a){null!==c&&(clearTimeout(c),c=null);b.stopped||(null===a?(b.stopped=!0,b.fireEvent("connectionPermanentlyDied","Server was unreachable for too long and your connection was lost.")):(b.gotEvents(a),b.getEvents()))},onFailure:function(){null!==c&&(clearTimeout(c),c=null);setTimeout(function(){b.getEvents(a+1)},2500)}}));d.post({id:this.clientID});c=setTimeout(function(){c=
null;d.cancel();b.getEvents(a)},62E3)}},gotEvents:function(a){var b=this;$each(a,function(a){switch(a[0]){case "waiting":b.fireEvent("waiting");break;case "connected":b.fireEvent("strangerConnected",a[1]);break;case "gotMessage":b.fireEvent("gotMessage",a[1]);break;case "strangerDisconnected":b.stopped=!0;b.fireEvent("strangerDisconnected");break;case "typing":b.fireEvent("typing");break;case "stoppedTyping":b.fireEvent("stoppedTyping");break;case "recaptchaRequired":b.fireEvent("recaptchaRequired",
a[1]);break;case "recaptchaRejected":b.fireEvent("recaptchaRejected",a[1]);break;case "count":onlineCountUpdated(a[1]);break;case "spyMessage":b.fireEvent("spyMessage",[a[1],a[2]]);break;case "spyTyping":b.fireEvent("spyTyping",a[1]);break;case "spyStoppedTyping":b.fireEvent("spyStoppedTyping",a[1]);break;case "spyDisconnected":b.stopped=!0;b.fireEvent("spyDisconnected",a[1]);break;case "question":b.fireEvent("question",a[1]);break;case "serverMessage":b.fireEvent("serverMessage",a[1]);break;case "error":b.stopped=
!0;b.fireEvent("error",a[1]);break;case "commonLikes":b.fireEvent("commonLikes",[a[1]]);break;case "antinudeBanned":b.stopped=!0;b.fireEvent("antinudeBanned",[a[1]]);break;case "statusInfo":gotServerStatus(a[1]);break;case "identDigests":b.fireEvent("identDigests",[a[1]]);break;case "icecandidate":b.fireEvent("icecandidate",[a[1]]);break;case "rtccall":b.fireEvent("rtccall");break;case "rtcpeerdescription":b.fireEvent("rtcpeerdescription",[a[1]]);break;case "partnerCollege":b.fireEvent("partnerCollege",
[a[1]])}})},sendMessage:function(a){this.sendPOST("/send",{msg:a})},typing:function(){this.sendPOST("/typing")},stopTyping:function(){this.sendPOST("/stoppedtyping")},submitRecaptcha:function(a,b){this.sendPOST("/recaptcha",{challenge:a,response:b})},disconnect:function(){this.sendPOST("/disconnect");this.stopped=!0},stopLookingForCommonLikes:function(){this.sendPOST("/stoplookingforcommonlikes")},sendRTCPeerDescription:function(a){this.sendPOST("/rtcpeerdescription",{desc:JSON.stringify(a)})},sendICECandidates:function(a){for(var b=
"id="+encodeURIComponent(this.clientID),c=0;c<a.length;c++)b+="&candidate="+encodeURIComponent(JSON.stringify(a[c]));this.sendPOST("/icecandidate",b)},sendPOST:function(a,b,c){b=b||{};c=c||0;"object"===typeof b&&(b.id=this.clientID);var d=this;killHeaders(new this.reqWindow.Request({url:subdomainManager.fixUrl(this.server,a),data:b,onFailure:function(){3>c&&d.sendPOST(a,b,c+1)}})).send()}}),flashCb_socketConnected,flashCb_socketGotPacket,flashCb_socketClosed,flashCb_socketError;
function resetFlashSocketCallbacks(){flashCb_socketConnected=function(){};flashCb_socketGotPacket=function(){};flashCb_socketClosed=function(){};flashCb_socketError=function(){}}function parseQueryString(a){var b={};a=a.split("&");for(var c=0;c<a.length;c++){var d=a[c].split("="),e=decodeURIComponent(d[0].replace(/\+/g," ")),d=decodeURIComponent(d[1].replace(/\+/g," "));b[e]=d}return b}
function middotify(a){for(var b=new Element("span"),c=0;c<a.length;c++)0<c&&b.appendText(" \u2022\u00a0"),b.grab(a[c]);return b}var flashSocketsWillWork="yes"===Cookie.read("flashsocketswork"),flashSocketsWork=!1;function setFlashSocketsWorkCookie(){Cookie.write("flashsocketswork","yes",{duration:1/12,domain:document.domain,path:"/"})}function flashCb_socketsWork(a,b){flashSocketsWork=!0;setFlashSocketsWorkCookie()}
var MetaBackend=new Class({Implements:[Options,Events],initialize:function(a){this.setOptions(a);this.numResumes=0;this.stopped=!1;this.server=null},plugInBackend:function(){var a=this;$each("connectedToServer waiting strangerConnected gotMessage strangerDisconnected typing stoppedTyping recaptchaRequired gotMessageHTML recaptchaRejected spyMessage spyTyping spyStoppedTyping spyDisconnected question error commonLikes antinudeBanned serverMessage identDigests icecandidate rtccall rtcpeerdescription partnerCollege".split(" "),
function(b){a.backend.addEvent(b,function(){if("strangerDisconnected"===b||"error"===b||"spyDisconnected"===b||"antinudeBanned"===b)a.stopped=a.backend.stopped;a.fireEvent(b,arguments)})});a.backend.addEvent("connectionDied",function(){serverManager.unsetKnownGood();if(a.backend.clientID&&3>a.numResumes&&!a.stopped){a.numResumes++;var b=a.backend.clientID;a.backend.removeEvents();a.backend=new COMETBackend;a.plugInBackend();a.server=serverManager.pickServer();a.backend.resume(a.server,b)}else a.stopped=
!0,a.fireEvent("connectionDied",arguments)});a.backend.addEvent("connectionPermanentlyDied",function(){serverManager.unsetKnownGood();a.stopped=!0;a.fireEvent("connectionDied",arguments)});a.backend.addEvent("failedToConnect",function(){serverManager.unsetKnownGood();3>a.numResumes?(a.numResumes++,a.backend.removeEvents(),a.connect.apply(a,a.connectArgs)):(a.stopped=!0,a.fireEvent("failedToConnect",a.backend.server))});a.backend.addEvent("permanentlyFailedToConnect",function(){serverManager.unsetKnownGood();
a.stopped=!0;a.fireEvent("failedToConnect",a.backend.server)})},connect:function(){this.backend=new COMETBackend;this.plugInBackend();this.server=serverManager.pickServer();this.connectArgs=arguments;for(var a=[this.server],b=0;b<arguments.length;b++)a.push(arguments[b]);this.backend.connect.apply(this.backend,a)},sendMessage:function(a){this.backend.sendMessage(a)},typing:function(){this.backend.typing()},stopTyping:function(){this.backend.stopTyping()},disconnect:function(){this.stopped=!0;this.backend&&
this.backend.disconnect()},submitRecaptcha:function(a,b){this.backend.submitRecaptcha(a,b)},stopLookingForCommonLikes:function(){this.backend.stopLookingForCommonLikes()},sendRTCPeerDescription:function(a){this.backend.sendRTCPeerDescription(a)},sendICECandidates:function(a){this.backend.sendICECandidates(a)}}),savedIntro=null,savedHeader=null;
function startFirstChat(a,b,c,d,e){IS_MOBILE?(logoElt=$("logo"),savedHeader=$("header"),$("header").dispose(),contentTop=0):(contentTop=$("intro").offsetTop,$$("#headerappstore").setStyle("visibility","visible"));firstChatTrackCode&&((new Image).src="http://wawadmin.omegle.com/redir/hometest?track="+(e?"unmon-"+(shouldForceUnmonitored?"":"not")+"forced-":"mon-")+(a?"videoy-":"videon-")+encodeURIComponent(firstChatTrackCode));savedIntro=$("intro");$("google_translate_upper_container")&&($("google_translate_upper_container").grab&&
$("google_translate_wrapper"))&&$("google_translate_upper_container").grab($("google_translate_wrapper"));$("intro").dispose();for(var f=Array.prototype.slice.call(arguments);5>f.length;)f.push(void 0);f.push(!0);startNewChat.apply(null,f)}
function showIntro(){savedHeader&&!$("header")&&(logoElt&&savedHeader.grab(logoElt,"top"),$(document.body).grab(savedHeader));savedIntro&&$(document.body).grab(savedIntro);if(IS_MOBILE)for(var a=0;300>=a;a+=50)setTimeout(function(){scrollTo(0,1)},a);else $$("#headerappstore").setStyle("visibility","hidden");mobileAdWrapper&&$("mobileadwrapper2")&&mobileAdWrapper.setStyles({display:"block",top:$("mobileadwrapper2").getPosition().y+"px"});a=makeTopicSettings(!0);$("topicsettingscontainer")&&($("topicsettingscontainer").empty(),
$("topicsettingscontainer").grab(a))}function commify(a){var b="",c;do{c=(a%1E3).toString();for(a=Math.floor(a/1E3);0!=a&&3>c.length;)c="0"+c;b=c+b;a&&(b=","+b)}while(0!=a);return b}function onlineCountUpdated(a){var b=$("onlinecount");if(b&&!(void 0===a||null===a||isNaN(a)))a=1E3*Math.floor(a/1E3),a="<strong>"+commify(a)+"+</strong> online now",b.set("html",a)}function randomSpyMode(){return 0.25>Math.random()?"spy":"spyee"}
var idealSpyMode=randomSpyMode(),firstStatusUpdate=!0,antinudeServers=[],lastScreenshotTime=null,screenshotPercent=0,shouldForceUnmonitored=!1;
function forceUnmon(){if(!IS_MOBILE&&!shouldForceUnmonitored){shouldForceUnmonitored=!0;var a=$("intro")||savedIntro;if(a){a.getElementById("monitoringnotice")&&a.getElementById("monitoringnotice").dispose();var b=new Element("div",{id:"monitoringnotice"});a.getElementById("chattypes").grab(b,"before");b.addClass("banned");var c=new Element("p",{html:"Your computer/network is <strong>banned</strong> for possible bad behavior."}),d=new Element("p",{"class":"extrainfo",html:"<strong>You can still use Omegle</strong>, but only the unmonitored section. <strong>You must be 18 or older.</strong>"}),
e=new Element("p",{"class":"extrainfo",html:"(If you didn't do anything wrong, sorry! Mistakes happen sometimes. Your ban won't last forever.)"});b.grab(c);b.grab(d);b.grab(e);a.getElements("#tryspymode, #intoheadercell, #topicsettingscell, #spymodebtn, #videobtnunmoderated").dispose();b="/static/pornbtn";b=window.devicePixelRatio&&1<window.devicePixelRatio?b+"@2x.png?xx":b+".png?xx";c=new Element("img",{src:b,width:124,height:50,id:"girlsbtn"});b=new Element("td");b.grab(c);var f=firstChatTrackCode?
"-"+firstChatTrackCode:"";c.addEvent("click",function(){window.open("http://wawadmin.omegle.com/redir/y?track=homepage-ban"+f)});c=new Element("td",{"class":"chattypeorcell",text:"or"});d="/static/gaybtnorange";d=window.devicePixelRatio&&1<window.devicePixelRatio?d+"@2x.png":d+".png";e=new Element("img",{src:d,width:124,height:50,id:"gaybtn"});d=new Element("td");d.grab(e);e.addEvent("click",function(){window.open("http://wawadmin.omegle.com/redir/gay?track=homepage-ban")});new Element("td",{"class":"chattypeorcell",
text:"or"});e=new Element("tr");e.grab(b);e.grab(c);e.grab(d);a.getElement("#chattypes tbody").grab(e)}}}var serverStatusTimeout=null;
function updateServerStatus(){serverStatusTimeout&&(clearTimeout(serverStatusTimeout),serverStatusTimeout=null);var a=serverManager.pickServer();subdomainManager.subdomainWindow(a,function(b){killHeaders(new b.Request.JSON({url:subdomainManager.fixUrl(a,"/status"),onSuccess:function(a){gotServerStatus(a)},onFailure:function(){serverManager.unsetKnownGood();serverStatusTimeout=setTimeout(updateServerStatus,1500)}})).get({nocache:Math.random(),randid:randID})})}var rtmfpServer="rtmfp://p2p.rtmfp.net";
function gotServerStatus(a){serverStatusTimeout&&(clearTimeout(serverStatusTimeout),serverStatusTimeout=null);onlineCountUpdated(a.count);idealSpyMode=1<a.spyQueueTime-a.spyeeQueueTime?"spyee":"spy";a.timestamp&&timeManager.gotAccurateTime(new Date(1E3*a.timestamp));a.servers&&a.servers.length&&serverManager.setServerList(a.servers);antinudeServers=a.antinudeservers||[];screenshotPercent=a.antinudepercent||0;a.force_unmon&&forceUnmon();firstStatusUpdate=!1;serverStatusTimeout=setTimeout(updateServerStatus,
9E4);a.rtmfp&&a.rtmfp.length&&(rtmfpServer=a.rtmfp)}function loadTumblrTags(a,b){var c=serverManager.pickServer();subdomainManager.subdomainWindow(c,function(d){killHeaders(new d.Request.JSON({url:subdomainManager.fixUrl(c,"/tumblr_tags"),onSuccess:function(a){b(a)},onFailure:function(){b({success:!1,error:"Error reaching server."})}})).post({username:a})})}
function processTumblrTags(a,b){b||(b=20);for(var c=[],d={},e=0;e<a.length;e++){var f=a[e],n=topicManager.normalize(f);d[n]?(d[n].count++,f.length>d[n].format.length&&(d[n].format=f)):(d[n]={count:1,format:f},c.push(n))}c.sort(function(a,b){var c=d[a].count,e=d[b].count;if(c!==e)return e-c;c=Math.abs(a.length-10);e=Math.abs(b.length-10);return c-e});f=[];for(e=0;e<Math.min(b,c.length);e++)f.push(d[c[e]].format);return f}
function setShouldUseLikes(a){shouldUseLikes=a;Cookie.write("uselikes",a?"1":"0",{duration:365,domain:document.domain,path:"/"})}function setShouldUseEnglish(a){shouldUseEnglish=a;Cookie.write("useenglish",a?"1":"0",{duration:365,domain:document.domain,path:"/"})}
function makeShouldUseLikesCheckbox(){var a=new Element("label"),b=new Element("input",{type:"checkbox",checked:shouldUseLikes,"class":"shoulduselikescheckbox"});b.addEvent("change",function(){setShouldUseLikes(b.checked)});a.grab(b);a.appendText(" Find strangers with common interests");return a}
function makeCollegeCheckboxes(a){var b=new Element("div");if(a){var c=new Element("div");c.setStyle("font-weight","bold");c.set("text","College: ");c.appendText(collegeAndAuth[0]);c.appendText(" ");c.grab(a);b.grab(c)}var c=new Element("label"),d=new Element("input",{type:"checkbox"});d.addEvent("change",function(){e.checked=!1;setCollegeMode(d.checked?"my":"none")});c.grab(d);a?c.appendText(" Find strangers from my college"):c.appendText(" "+collegeAndAuth[0]);b.grab(c);a?b.grab(new Element("br")):
b.appendText(" ");a=new Element("label");var e=new Element("input",{type:"checkbox"});e.addEvent("change",function(){d.checked=!1;setCollegeMode(e.checked?"any":"none")});a.grab(e);a.appendText(" Any college");b.grab(a);"my"===collegeMode?d.checked=!0:"any"===collegeMode&&(e.checked=!0);return b}
function makeCollegeEmailForm(a){var b=new Element("div"),c=["<strong>College student</strong> chat","<strong>College student</strong> chat"],d=Math.floor(Math.random()*c.length),e=new Element("div"),c=new Element("a",{html:c[d],href:"javascript:",events:{click:function(a){a.preventDefault();b.grab(f);g.focus();e.dispose();(new Image).src="http://wawadmin.omegle.com/redir/hometest?track=college39-"+d}}});c.setStyles({display:"block","margin-top":"0.5em",border:"1px solid #CCC",background:"#EEE",color:"black",
"text-align":a?"center":"left","text-decoration":"none",padding:"0.25em","border-radius":"0.5em",position:"relative"});c.setStyle("padding-left",a?"0.25em":"2em");c.grab(new Element("span",{text:"\u25b6",styles:{position:"absolute",left:"1em",top:"0"}}),"top");e.grab(c);b.grab(e);var f=new Element("form",{styles:{margin:0,padding:0,"text-align":"justify"},events:{submit:function(a){function b(a,c){p.setStyle("color",a?"green":"red");var d=c.split("\n");p.empty();for(var e=0;e<d.length;e++)p.grab(new Element("div",
{text:d[e]}));g.set("disabled",!1);r.set("disabled",!1);g.set("value","")}a.preventDefault();p.empty();g.set("disabled",!0);r.set("disabled",!0);var c=serverManager.pickServer();subdomainManager.subdomainWindow(c,function(a){killHeaders(new a.Request.JSON({url:subdomainManager.fixUrl(c,"/send_email"),onSuccess:function(a){(new Image).src="http://wawadmin.omegle.com/redir/hometest?track=collegex39-"+d;b(a.success,a.msg)},onFailure:function(){b(!1,"Technical error. Sorry. :(")}})).post({email:g.get("value")})})}}});
f.setStyle("margin-top","1em");c=new Element("div",{styles:{"font-size":"0.9em"}});c.set("html","Please enter a college email address <strong>ending in .edu or .edu.XX or .ac.XX</strong> to verify you're in college. This will allow you to chat with other college students.");f.grab(c);var c=new Element("div",{styles:{"text-align":a?"center":"left"}}),n=new Element("label"),g=new Element("input",{type:"text",size:"35"});n.grab(g);c.grab(n);var r=new Element("input",{type:"submit",value:"Go"});c.appendText(" ");
c.grab(r);f.grab(c);var p=new Element("div",{styles:{"text-align":a?"center":"left"}});f.grab(p);a=new Element("div",{styles:{"font-size":"0.9em"}});a.set("html","<strong>We WON'T spam you, sell your address, or save it.</strong><br>We'll email you to verify your college address, and that's all. Other users won't see your address, only the domain (the part after the @ sign).");f.grab(a);return b}var initOfFbCallbacks=[],initOfFbComplete=!1;
window.fbAsyncInit=function(){FB.init({appId:"372387627273",cookie:!0,status:!0,xfbml:!0,oauth:!0,channelUrl:"http://"+document.domain+"/static/channel.html"});initOfFbComplete=!0;for(var a=0;a<initOfFbCallbacks.length;a++)initOfFbCallbacks[a]();initOfFbCallbacks=null};
function unmonitoredConfirm(){return confirm("Because this section is not moderated, you are more likely to encounter sexual behavior. As with the rest of Omegle, users in this section are solely responsible for their own behavior.\n\nIF YOU ARE UNDER 18, or you would prefer not to use this section, press CANCEL. By pressing OK, you affirm that you are at least 18 years old.")}function startUnmonitoredVideo(){unmonitoredConfirm()&&startFirstChat(!0,void 0,void 0,void 0,!0)}var basicReadyCalled=!1;
function basicReady(){if(!basicReadyCalled&&(basicReadyCalled=!0,$("feedback"))){var a=$$("#feedback h2");"#feedback"==location.hash?($("feedback").addClass("expanded"),$("feedbackmessage").focus()):$("feedback").addClass("collapsed");a.addEvent("needsclick");a.addEvent("click",function(){$("feedback").hasClass("expanded")?($("feedback").removeClass("expanded"),$("feedback").addClass("collapsed")):($("feedback").removeClass("collapsed"),$("feedback").addClass("expanded"),$("feedbackmessage").focus())})}}
function onReady(){function a(){$("tryspymodetext").empty();var a=makeSpyOptionsForm(startFirstChat);a.form.setStyle("marginTop","0.5em");a.form.setStyle("marginBottom","0.5em");$("tryspymodetext").appendText("Spy mode lets you ask a question and watch two strangers discuss it. (The strangers volunteer to be watched.)");$("tryspymodetext").grab(new Element("br"));$("tryspymodetext").appendText("Ask anything you like, but try to keep questions open-ended and thought-provoking.");$("tryspymodetext").grab(a.form);
var b=new Element("div"),c=new Element("button",{text:"Ask strangers"});c.addEvent("click",a.go);b.grab(c);$("tryspymodetext").grab(b);b=new Element("div");b.setStyle("font-size","0.9em");b.set("text","Or you can try ");c=new Element("a");c.set("text","discussing questions");c.set("href","javascript:");c.addEvent("click",function(a){a.preventDefault();startFirstChat(!1,null,!0,!1)});b.grab(c);b.appendText(" instead.");$("tryspymodetext").grab(b);a.focus()}function b(){$("tryspymodetext").empty();
$("tryspymodetext").set("html","Spy mode gives you and a stranger a <strong>random question</strong> to discuss. The question is submitted by a third stranger who can watch the conversation, but can't join in.");var b=new Element("button",{text:"Check it out!"});b.addEvent("click",function(a){a.preventDefault();startFirstChat(!1,null,!0,!1)});$("tryspymodetext").grab(new Element("br"));$("tryspymodetext").grab(b);b=new Element("div");b.setStyle("font-size","0.9em");b.set("text","Or you can try ");
var c=new Element("a");c.set("text","asking a question");c.set("href","javascript:");c.addEvent("click",function(b){b.preventDefault();a()});b.grab(c);b.appendText(" instead.");$("tryspymodetext").grab(b)}basicReady();updateServerStatus();if(null===$("textbtn")&&null===$("chatbtn"))window.addEvent("load",onReady);else{"undefined"!==typeof FastClick&&new FastClick(document.body);($("textbtn")||$("chatbtn")).addEvent("click",function(){startFirstChat(!1)});if($("mobileadwrapper")&&(mobileAdWrapper=
$("mobileadwrapper"),mobileAdWrapperSize=mobileAdWrapper.getSize(),"body"!==mobileAdWrapper.getParent().get("tag")&&($(document.body).grab(mobileAdWrapper),mobileAdWrapper.setStyle("display","none")),$("mobileadwrapper2"))){$("mobileadwrapper2").setStyles({width:mobileAdWrapperSize.x+"px",height:mobileAdWrapperSize.y+"px",margin:"auto","text-align":"center"});var c=$("mobileadwrapper2").getPosition();mobileAdWrapper.setStyles({display:"block",position:"absolute",top:c.y+"px",left:c.x+"px"})}$("flashwrapper")&&
($("flashwrapper").addEvent("mouseleave",function(){$("flash").mouseOut&&$("flash").mouseOut()}),$("flashwrapper").addEvent("mouseenter",function(){$("flash").mouseOver&&$("flash").mouseOver()}),swfobject.embedSWF("/static/omegle.swf?40","flash",320,520,"10.0.0",null,null,null,null,function(a){a.success||$("videobtnstatus").set("html",'Requires <a href="http://get.adobe.com/flashplayer/">Flash 10</a>.')}));$("tryspymode")&&(c=function(){$("textbtnstatus")&&$("textbtnstatus").empty();$("tryspymode").setStyle("display",
"block");$("tryspymode").removeEvents("click");$("tryspymode").removeClass("collapsed");"spy"==idealSpyMode?a():b()},$("tryspymode").addClass("needsclick"),$("tryspymode").addEvent("click",c),IS_MOBILE||($("tryspymode").setStyle("display","none"),(new Element("a",{id:"spymodebtn",text:"Spy (question) mode",href:"javascript:",styles:{"border-radius":"0.5em","-moz-border-radius":"0.5em","-webkit-border-radius":"0.5em",background:"#EEE","font-weight":"normal",padding:"0.333em 0",display:"block","margin-left":"3px",
"margin-right":"3px","margin-top":"0.25em",color:"#333","text-decoration":"none"},events:{click:c}})).inject("textbtnstatus")));c=makeTopicSettings(!0);$("topicsettingscontainer")&&$("topicsettingscontainer").grab(c);collegeJustEnabled&&function(){var a=new Element("div",{styles:{width:"90%","border-radius":"0.5em","text-align":"center",padding:"0.5em","margin-top":"1em","margin-left":"auto","margin-right":"auto"}});collegeAndAuth?(a.setStyle("background","#FF9"),a.set("html","Congrats! You enabled Omegle's new dorm mode. Start a new text or video chat, and you will be matched with other college students.<br><br>If you ever want to disable this, just uncheck the associated checkbox (above).")):
(a.setStyle("background","red"),a.set("text","Sorry! It looks like you tried to enable dorm mode, but there was a technical error. Please make sure you have cookies enabled and try again."));$("intro")&&$("intro").grab(a);$("chattypes").scrollIntoView(!1)}()}}window.addEvent("domready",onReady);
function googleTranslateElementFullyLoaded(){if("undefined"!==typeof googTr&&googTr.c&&googTr.g&&"string"===typeof googTr.c&&"string"===typeof googTr.g&&("en"!==googTr.c.substr(0,2).toLowerCase()||"en"!==googTr.g.substr(0,2).toLowerCase())&&$("google_translate_wrapper")&&$("google_translate_lower_container")&&$("google_translate_lower_container").grab){$("google_translate_lower_container").grab($("google_translate_wrapper"));$("google_translate_lower_container").grab(new Element("br"));var a="English";
googTr.L&&"string"===typeof googTr.L.en&&(a=googTr.L.en);$("google_translate_lower_container").appendText('(Select "'+a+'" to chat in English)')}}function onLoad(){IS_MOBILE&&setTimeout(function(){window.scrollTo(0,1)},0);IS_MOBILE||startSpinner()}window.addEvent("load",onLoad);
var topicManager=function(){function a(){Cookie.write("topiclist",JSON.encode(d),{duration:365,domain:document.domain,path:"/"})}function b(a){return a.toLowerCase().replace(/[^a-zA-Z0-9]/g,"")}function c(a){a=b(a);for(var c=0;c<d.length;c++)if(b(d[c])===a)return!0;return!1}var d=[],e=Cookie.read("topiclist");e&&(d=JSON.decode(e));a();return{list:function(){return d},add:function(e){if(!b(e)||c(e))return!1;d.push(e);a();return!0},remove:function(c){c=b(c);for(var e=0;e<d.length;e++)if(b(d[e])===c)return d.splice(e,
1),a(),!0;return!1},normalize:b,check:c}}();
function makeTopicSettings(a){function b(a){var b=new Element("span",{"class":"topictag"}),c=new Element("span",{"class":"topictagtext",text:a});b.grab(c);c=new Element("span",{"class":"topictagdelete",html:"&times;"});c.addEvent("click",function(){b.destroy();topicManager.remove(a);e()});b.grab(c);p.grab(b);c=new Element("span");c.setStyle("font-size",0);c.appendText(" ");p.grab(c)}function c(){e();setTimeout(e,0)}function d(){var a=x.get("value");x.set("value","");for(var a=a.split(","),a=a.map(function(a){return a.trim()}),
c=0;c<a.length;c++){var d=a[c];topicManager.add(d)&&(b(d),setShouldUseLikes(!0),q.set("checked",!0))}IS_MOBILE&&x.blur();e()}function e(){x.value||topicManager.list().length?u.setStyle("display","none"):a&&!IS_MOBILE?u.setStyle("display","block"):u.setStyle("display","inline");E.checked||topicManager.list().length?k.setStyle("display","block"):k.setStyle("display","none")}function f(a){Cookie.write("fblikes",a?"1":"0",{duration:365,domain:document.domain,path:"/"})}function n(){h.setStyle("display",
"block");shouldUseFbLikes&&(E.set("checked",!0),e());"0"!==Cookie.read("fblikes")&&FB.getLoginStatus(function(a){a.authResponse?(E.set("checked",!0),f(!0),shouldUseFbLikes=!0):f(!1);e()})}var g=new Element("div",{"class":"topictageditor"});if(a&&!IS_MOBILE){g.setStyles({padding:"4px","min-height":"40px","border-radius":"4px",position:"relative"});try{g.setStyle("background","-moz-linear-gradient(0deg, #F7F7F7, #FFF)"),g.setStyle("background","-webkit-linear-gradient(0deg, #F7F7F7, #FFF)"),g.setStyle("background",
"linear-gradient(0deg, #F7F7F7, #FFF)")}catch(r){}g.setStyle("border-radius","3px / 5px")}var p=new Element("span",{"class":"topictagwrapper"});g.grab(p);$each(topicManager.list(),b);var u=new Element("span",{"class":"topicplaceholder"});IS_MOBILE?u.appendText("Add your interests (optional)"):(u.appendText("What do you wanna talk about? (Type your interests here.)"),a&&(u.empty(),u.appendText("Add your interests (optional)"),u.setStyles({"line-height":"48px","text-align":"center","vertical-align":"middle",
"font-family":"'Lucida Grande', Lucida, sans-serif","font-size":"21px",position:"absolute",top:0,left:0,right:0,bottom:0})));g.grab(u);var x=new Element("input",{type:"text","class":"newtopicinput"});x.addEvent("keydown",c);x.addEvent("keypress",c);x.addEvent("keyup",c);x.addEvent("keydown",function(a){32===a.code&&!x.get("value")&&a.preventDefault();if(13===a.code||188===a.code)a.preventDefault(),d()});x.addEvent("blur",d);g.grab(x);g.addClass("needsclick");g.addEvent("click",function(){x.focus()});
var s=new Element("div",{styles:{"text-align":"left"}});s.grab(g);var D=new Element("div"),m=new Element("a",{"class":"needsclick",text:"Add my Tumblr tags as topics",href:"javascript:",events:{click:function(a){a.preventDefault();m.dispose();D.grab(I);y.focus()}},styles:{"margin-left":"1.5em"}});D.grab(m);var I=new Element("form",{styles:{margin:0,padding:0},events:{submit:function(a){a.preventDefault();if(!y.get("disabled")&&(a=y.get("value")))y.set("value",""),y.set("disabled",!0),v.set("disabled",
!0),loadTumblrTags(a,function(a){y.set("disabled",!1);v.set("disabled",!1);if(a.success){a=processTumblrTags(a.tags);for(var c=0;c<a.length;c++){var d=a[c];topicManager.add(d)&&(b(d),setShouldUseLikes(!0),q.set("checked",!0))}e();F.empty();I.dispose();D.grab(m);"undefined"!==typeof _gaq&&_gaq.push(["_trackEvent","Tumblr tags","Tags added"])}else F.empty(),F.setStyle("color","red"),F.appendText(a.error)})}}}),g=new Element("label");g.appendText("Tumblr name: ");var y=new Element("input",{type:"text"});
g.grab(y);I.grab(g);I.appendText(" ");var v=new Element("input",{type:"submit",value:"Go"});I.grab(v);var F=new Element("div");F.setStyle("font-size","0.9em");F.setStyle("max-width","20em");F.appendText("Omegle will try to learn your interests from posts and likes you've made public on Tumblr. Omegle is NOT requesting special access to your Tumblr account, and will NOT save your username, or give it to anyone.");I.grab(F);var h=new Element("div");h.setStyle("display","none");var g=new Element("label"),
E=new Element("input",{type:"checkbox"});E.addEvent("click",function(a){E.checked?(a.preventDefault(),FB.login(function(a){a.authResponse&&(shouldUseFbLikes=!0,f(!0),E.set("checked",!0),setShouldUseLikes(!0),q.set("checked",!0),e())},{scope:"user_likes"})):(shouldUseFbLikes=!1,f(!1));setTimeout(e,0)});g.grab(E);g.appendText(" Add my Facebook likes as topics");h.grab(g);s.grab(h);var k=new Element("div"),g=makeShouldUseLikesCheckbox(),q=g.getElement("input");k.grab(g);s.grab(k);e();initOfFbComplete?
n():initOfFbCallbacks.push(n);if(collegeAndAuth){var J=makeCollegeCheckboxes(new Element("a",{href:"javascript:",text:"(Delete)",styles:{"font-weight":"normal"},events:{click:function(b){b.preventDefault();confirm('Are you sure you want to remove your college affiliation?\n\nIf you just want to quit dorm chat and chat with completely random strangers, you can uncheck the "find strangers from my college" box.')&&(clearCollegeSetting(),makeCollegeEmailForm(a).replaces(J))}}}));s.grab(J)}else s.grab(makeCollegeEmailForm(a));
return s}
var subdomainManager=function(){var a={},b={};return{subdomainWindow:function(c,d){if(void 0!==Browser.Request().withCredentials)d(window);else if(a[c])d(a[c]);else{b[c]?b[c].push(d):b[c]=[d];var e=new Element("iframe",{src:"http://"+c+"/static/xhrframe.html",width:0,height:0,frameBorder:0});e.setStyle("display","none");$(document.body).grab(e)}},fixUrl:function(a,b){return void 0!==Browser.Request().withCredentials?"http://"+a+b:b},iframeLoaded:function(c,d){if(!a[c]&&(a[c]=d,b[c])){for(var e=0;e<
b[c].length;e++)(0,b[c][e])(d);delete b[c]}}}}(),serverManager=function(){var a=[],b=null,c=null,d={setKnownGood:function(){b=c},unsetKnownGood:function(){b=null},pickServer:function(){if(null!==b&&-1!==a.indexOf(b))return b;for(;;){var e=a.shift();a.push(e);if(!(/^front([1-9]|10)\./.test(e)&&0.333>Math.random()))break}return c=e},setServerList:function(b){var c=!1,d,g,r;for(d=1;d<b.length;d++)g=Math.floor(Math.random()*(1+d)),g!=d&&(r=b[d],b[d]=b[g],b[g]=r);for(d=0;d<b.length;d++)g=b[d],-1===a.indexOf(g)&&
(c=!0,a.splice(Math.floor(Math.random()*(a.length+1)),0,g));c&&this.unsetKnownGood();for(d=0;d<a.length;d++)g=a[d],-1===b.indexOf(g)&&a.splice(d,1)}};d.setServerList("front1.omegle.com front2.omegle.com front3.omegle.com front4.omegle.com front5.omegle.com front6.omegle.com front7.omegle.com front8.omegle.com front9.omegle.com front10.omegle.com front11.omegle.com front11.omegle.com front12.omegle.com front13.omegle.com front14.omegle.com front15.omegle.com front16.omegle.com".split(" "));return d}(),
timeManager=function(){var a=0;return{now:function(){var b=new Date;b.setTime(b.getTime()+a);return b},gotAccurateTime:function(b){a=b-new Date}}}(),flashCb_gotNearID,flashCb_errorConnectingToStratus,flashCb_camAvailable,flashCb_screenshotNotPosted=function(){lastScreenshotTime=null};function resetStratusCallbacks(){flashCb_gotNearID=function(){};flashCb_errorConnectingToStratus=function(){}}function resetCameraCallbacks(){flashCb_camAvailable=function(){}}
function resetFlashCallbacks(){resetStratusCallbacks();resetCameraCallbacks()}resetFlashCallbacks();var videoChatEnabled=!1,flashWatermarkTrack=null;
function flashCb_init(a){-1===navigator.userAgent.indexOf("AppleWebKit")&&$("flashwrapper").addClass("inited");"#nwc"==window.location.hash&&(a=!0);a?(videoChatEnabled=!0,$("videobtn").set("src",$("videobtn").get("src").replace("-disabled","-enabled")),$("videobtn").removeClass("disabled"),$("videobtn").removeEvents("click"),$("videobtn").addEvent("click",function(){startFirstChat(!0)}),$("videobtnstatus").empty(),$("videobtnstatus").setStyle("padding-top","0"),a=new Elements([(new Element("a",{id:"videobtnunmoderated",
text:"Unmoderated section",href:"javascript:",styles:{"border-radius":"0.5em","-moz-border-radius":"0.5em","-webkit-border-radius":"0.5em",background:"#EEE","font-weight":"normal",padding:"0.333em 0",display:"block","margin-left":"3px","margin-right":"3px","margin-top":"0.25em",color:"#333","text-decoration":"none"}})).inject("videobtnstatus")]),$("unmonitoredvideobtn")&&a.push((new Element("a",{id:"unmonitoredvideobtn",text:$("unmonitoredvideobtn").get("text"),href:"javascript:"})).replaces("unmonitoredvideobtn")),
a.addEvent("click",function(a){a.preventDefault();startUnmonitoredVideo()}),shouldForceUnmonitored&&$("videobtnstatus").set("html","&nbsp;")):$("videobtnstatus").set("html","Requires a webcam.");$("flash")&&$("flash").setRandID&&$("flash").setRandID(randID)}function killHeaders(a){delete a.headers["X-Requested-With"];delete a.headers["X-Request"];return a}
function makeSpyOptionsForm(a,b,c){function d(){a(!1,g.value,!1,r.checked)}void 0===b&&(b="");void 0===c&&(c=!0);var e=new Element("form");e.addEvent("submit",function(a){a.preventDefault();d()});var f=new Element("div"),n=new Element("label");n.grab(new Element("strong",{text:"Enter a question:"}));n.grab(new Element("br"));var g=new Element("input",{"class":"questionInput",value:b,maxlength:200});n.grab(g);f.grab(n);e.grab(f);b=new Element("div");b.setStyle("marginTop","0.5em");var f=new Element("label"),
r=new Element("input",{type:"checkbox",checked:c});f.grab(r);f.appendText(" I want Omegle to reuse this question if it's good enough.");b.grab(f);e.grab(b);return{form:e,focus:function(){g.focus()},go:d}}var flashingInterval=null;function isFlashing(){return null!==flashingInterval}
function startFlashing(){function a(){var a=b.pop();document.title=a[0];setFavicon(a[1]);b.unshift(a)}if(!IS_MOBILE&&!isFlashing()){var b=[["___Omegle___","/static/favicon.png"],["\u00af\u00af\u00afOmegle\u00af\u00af\u00af","/static/altfavicon.png"]];flashingInterval=setInterval(a,500);a();$(document).addEvent("mousemove",mouseMove);$(document).addEvent("keydown",stopFlashing);$(document).addEvent("focus",stopFlashing);$(window).addEvent("mousemove",mouseMove);$(window).addEvent("keydown",stopFlashing);
$(window).addEvent("focus",stopFlashing)}}var lastCoords=null;function mouseMove(a){a=a.page;null!==lastCoords&&(a.x!=lastCoords.x||a.y!=lastCoords.y)&&stopFlashing();lastCoords=a}
function stopFlashing(){isFlashing()&&(clearInterval(flashingInterval),flashingInterval=null,document.title="Omegle",setFavicon("/static/favicon.png"),$(document).removeEvent("mousemove",mouseMove),$(document).removeEvent("keydown",stopFlashing),$(document).removeEvent("focus",stopFlashing),$(window).removeEvent("mousemove",mouseMove),$(window).removeEvent("keydown",stopFlashing),$(window).removeEvent("focus",stopFlashing))}
function setFavicon(a){for(var b=$$("link"),c=0;c<b.length;c++)if("icon"===b[c].rel){b[c].href=a;return}a=new Element("link",{rel:"icon",type:"image/png",href:a});$$("head")[0].grab(a)}var spinnerPossible=!1;
function initSpinner(a){function b(a,b,m){u.clearRect(0,0,n,g);d.width=d.width;u.drawImage(c,f,0,e-f,f,2*f,f,e-f,f);a/=b;a=0.75>a?2.125*Math.PI*Math.sin(a/0.75*(Math.PI/2)):Math.PI/8-Math.PI/8*(a-0.75)/0.25;m&&(a=-a);u.save();u.translate(1.6*f,1.6*f);u.rotate(a);u.drawImage(c,0,0,f,f,0.6*-f,0.6*-f,f,f);u.restore()}if(window.CanvasRenderingContext2D){var c=$$("#logo > img")[0];if(c&&c.height){$("header").setStyles({height:"57px"});var d=new Element("canvas");d.setStyle("position","absolute");var e=
c.naturalWidth||c.width,f=c.naturalHeight||c.height,n=e+f,g=3*f,r=c.width+c.height,p=3*c.height;d.width=n;d.height=g;d.style.width=r+"px";d.style.height=p+"px";d.style.marginLeft="-"+c.height+"px";d.style.marginTop="-"+c.height+"px";var u=d.getContext("2d");spinnerPossible=!0;if(a)return!0;var x=!1;startSpinner=function(){if(!x){x=!0;var a=500+400*Math.random(),c=null;window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||
function(a){window.setTimeout(a,1E3/60)}}();var d=0.5>Math.random();requestAnimFrame(function y(e){e||(e=+new Date);c||(c=e);e-=c;e>a?(x=!1,b(0,1)):(b(e,a,d),requestAnimFrame(y))})}};initSpinner=function(){};b(0,1);c.setStyle("visibility","hidden");c.grab(d,"before");return!0}}}function startSpinner(){initSpinner()&&startSpinner()}var mobileAdWrapper=null,mobileAdWrapperSize=null,currentAffiliate=null,isFirstChat=!0,chatOddEven=!0,chatPervTrack=[];
function startNewChat(a,b,c,d,e,f){function n(){var a=document.activeElement;if(!a)return t.get("disabled");a=a.nodeName.toLowerCase();return"input"!==a&&"textarea"!==a}function g(a){27===a.code&&a.preventDefault();var b=new Date;(16===a.code||17===a.code||18===a.code||91===a.code||93===a.code)&&null!==Ka&&200>b-Ka&&350<=b-cb?(Q(),H()):!IS_MOBILE&&!t.get("disabled")&&!a.control&&!a.meta&&(8===a.code||37==a.code||39==a.code||46<=a.code&&90>=a.code||96<=a.code&&111>=a.code)?t.focus():8===a.code&&n()&&
a.preventDefault()}function r(a){if(27===a.code){a.preventDefault();if(V.get("disabled"))return;db&&500<=new Date-cb&&(a.shift||a.alt||a.meta)?(Q(),H()):(w(),Ka=new Date)}8===a.code&&n()&&a.preventDefault()}function p(){var a=new Date;if(50>a-La)Ma||(Ma=setTimeout(p,50-(a-La)));else if(Ma=null,La=a,a=$$(".msggroup"),!(3>a.length))for(var b=$(document.body).getScroll(),c=$(document.body).getSize(),d=0;d<a.length;d++){var e=a[d],w=e.getCoordinates();if(!(w.bottom<b.y+bwLogo.height+5)&&!(w.width+bwLogo.width+
10>c.x)){if(w.bottom>b.y+c.y){M&&(M.dispose(),M=null);break}if(M&&e==M.getParent())break;M&&M.dispose();M=new Element("div",{styles:{position:"absolute",bottom:0}});"right"==e.getComputedStyle("float")?M.setStyle("left","-"+(bwLogo.width+10)+"px"):M.setStyle("right","-"+(bwLogo.width+10)+"px");M.grab(bwLogo);e.grab(M);break}}}function u(a){var b=IS_MOBILE&&document.activeElement&&$(t)==$(document.activeElement);scrollElt.scrollTop=scrollElt.scrollHeight;b&&$(t)!=$(document.activeElement)&&t.focus();
IS_MOBILE&&p();if(a||void 0===a)for(a=50;500>=a;a+=150)setTimeout(function(){u(!1)},a)}function x(a,b){var c=new Element("form");c.setStyle("display","none");c.set("method","post");c.set("target","_blank");c.set("action","http://logs.omegle.com/generate");c.set(b);a=a||{host:1};var d={log:JSON.encode(ka),randid:randID};aa&&(d.topics=JSON.encode(aa));Na&&(d.identdigests=Na);d=$extend(d,a);$each(d,function(a,b){var A=new Element("input",{type:"hidden",name:b,value:a});c.grab(A)});$(document.body).grab(c);
c.submit();setTimeout(function(){c.dispose()},0)}function s(a){if(a){for(var b=0,c=0,d=0;d<a.length;d++)a[d].percentage?c+=a[d].percentage:b++;if(b)for(d=0;d<a.length;d++)a[d].percentage||(a[d].percentage=(100-c)/(b+1))}}function D(a,b){if(!a)return b;for(var c=100*Math.random(),d=0;d<a.length;d++){var e=a[d];if(c<e.percentage)return $merge(b,e);c-=e.percentage}return b}function m(a){s(a.tests);s(a.variants);if(a.tests)for(var b=0;b<a.tests.length;b++)s(a.tests[b].variants)}function I(a){var b;b=
IS_MOBILE?!0:scrollElt.scrollTop>=scrollElt.scrollHeight-scrollElt.clientHeight;a=a();b&&u();return a}function y(a,b){return I(function(){var c=new Element("div",{"class":"logitem"});c.grab(a);0===ba.length||b?la.grab(c):c.inject(ba[0].element,"before");return c})}function v(a,b,c,d){(void 0===b||b)&&startFlashing();var e;void 0===d||d&&"string"!==typeof d?(b=!0,e=null):"string"===typeof d?(b=!0,e=d):b=!1;"string"===typeof a?(d=new Element("p",{"class":"statuslog"}),d.appendText(a),null===e&&(e=a)):
(d=new Element("div",{"class":"statuslog"}),d.grab(a));b&&(!ua&&null!==e)&&ka.push([e]);return y(d,c)}function F(a){"undefined"!==typeof Recaptcha&&Recaptcha.destroy();null!==W&&W.dispose();W=y(a);initialLogIsRecaptcha=!1}function h(a,b){"undefined"!==typeof Recaptcha&&Recaptcha.destroy();null!==W&&W.dispose();W=v(a,!1,!1,"undefined"===typeof b?!1:b);initialLogIsRecaptcha=!1}function E(a,b,c){var d=new Element("span");eb&&d.addClass("notranslate");var e=!0;$each(c.split("\n"),function(a){e||d.grab(new Element("br"));
e=!1;d.appendText(a)});if(IS_MOBILE){var w=new Element("div",{"class":"msggroup-msg"});w.grab(d);if(fb===a)I(function(){gb.grab(w)});else{b=new Element("div",{"class":"msggroup "+b+"group"});new Element("div",{"class":"msggroup-label",text:a+":"});var f=new Element("div",{"class":"msggroup-msgs"});f.grab(w);b.grab(f);y(b);gb=f;fb=a}}else b=new Element("p",{"class":b}),f=new Element("strong",{"class":"msgsource"}),f.appendText(a+":"),b.grab(f),b.appendText(" "),b.grab(d),y(b);ua||ka.push([a+":",c])}
function k(a,b){if("you"==a){var c="youmsg",d="You";Oa=!0}else c="strangermsg",d="Stranger",startFlashing(),hb=!0;b=b.trim();"stranger"===a&&-1!==b.toLowerCase().indexOf("videobam")||(E(d,c,b),"stranger"===a&&(-1!==b.indexOf("FBI")||-1!==b.toLowerCase().indexOf("federal bureau"))&&v("If the above message says you have been reported to the FBI, it is not legitimate. Please ignore it."),"stranger"===a&&(-1!==b.toLowerCase().indexOf("facebook.com/profile.php?")&&-1===b.toLowerCase().indexOf("id="))&&
v("THE STRANGER DOES NOT KNOW YOUR FACEBOOK INFO. The above link directs anyone to their own profile; it is not really a link to your profile specifically."))}function q(a){for(var b=0;b<ba.length;b++)if(!a||ba[b].name===a){ba[b].element.dispose();ba.splice(b,1);break}}function J(){q("Stranger")}function ea(a){q(a);var b=v(a+" is typing...",!1,!0,!1);ba.push({name:a,element:b})}function U(){ma=!0;$("logo").removeEvent("click",fa);null!==L&&(clearInterval(L),L=null);ga&&$(window).removeEvent("resize",
ga);IS_MOBILE?($(document.body).removeEvent("scroll",p),$(document).removeEvent("scroll",p)):($(document).removeEvent("keydown",g),$(document).removeEvent("keyup",r));va.dispose()}function H(A,w,f,g,O){if(!ma){if(void 0===A){if(null!==na){na.go();return}A=a}A&&(w=null,g=f=!1);void 0===w&&(w=b);void 0===f&&(f=c);void 0===g&&(g=d);void 0===O&&(O=e);null!==X&&(clearTimeout(X),X=null);A||K();U();startNewChat(A,w,f,g,O)}}function fa(){if(!l.stopped&&!oa){if(!confirm("Are you sure you want to end your chat?"))return;
Q()}$(document.body).removeClass("inconversation");$(document.body).removeClass("videochat");$("logo").setStyle("cursor","default");U();showIntro()}function K(){null!==X&&(clearTimeout(X),X=null);$("flash")&&$("flash").turnOffCamera&&$("flash").turnOffCamera()}function R(){if(!IS_MOBILE){null===unmonSexyButton&&(unmonSexyButton=new Element("img",{width:124,height:50,alt:"Sexy",styles:{cursor:"pointer","vertical-align":"middle","margin-right":"0.5em"}}),unmonSexyTrack="",window.devicePixelRatio&&1<
window.devicePixelRatio?unmonSexyButton.set("src","/static/sexbtn@2x.png?xx"):unmonSexyButton.set("src","/static/sexbtn.png?xx"));unmonSexyButton.addEvent("click",function(){null!==C&&C();var b="unmon-upper-"+(shouldForceUnmonitored?"":"not")+"forced-",b=b+(a?"video":"text");window.open("http://wawadmin.omegle.com/redir/"+(IS_MOBILE?"mob":"y")+"?track="+b+unmonSexyTrack)});null===unmonGayButton&&(unmonGayButton=new Element("img",{width:124,height:50,alt:"Gay",styles:{cursor:"pointer","vertical-align":"middle"}}),
unmonGayTrack="",window.devicePixelRatio&&1<window.devicePixelRatio?unmonGayButton.set("src","/static/gaybtnorange@2x.png"):unmonGayButton.set("src","/static/gaybtnorange.png"));unmonGayButton.addEvent("click",function(){null!==C&&C();var b="unmon-upper-"+(shouldForceUnmonitored?"":"not")+"forced-",b=b+(a?"video":"text");window.open("http://wawadmin.omegle.com/redir/gay?track="+b+unmonGayTrack)});var b=new Element("div");b.grab(unmonSexyButton);IS_MOBILE||b.grab(unmonGayButton);var c=new Element("span",
{html:"&times;",styles:{"font-weight":"bold",color:"#555","font-size":"1.5em",cursor:"pointer"},events:{click:function(){d.dispose();chatPervTrack=[];pa.dispose();wa.dispose()}}});e||(b.appendText(" "),b.grab(c));var d=y(b,!1)}}function G(){function A(b){if("video"!==b||videoChatEnabled){if(p){p=!1;var c="video"===b?"turn on "+b:"switch to "+b}else c=b;n.appendText(" or ");n.grab(new Element("a",{href:"javascript:",text:c,events:{click:function(c){c.preventDefault();switch(b){case "text":H(!1,null,
!1,!1,!1);break;case "video":H(!0);break;case "moderated section":H(a,null,!1,!1,!1);break;case "unmoderated section":null!==C&&C(),unmonitoredConfirm()&&H(a,null,!1,!1,!0)}}}}))}}function w(){function a(){B.empty();A?e||(e=!0,Ja.set("text","Not automatically rerolling."),ja.dispose(),g.grab(S),O("new")):(f&&B.set("text"," (Paused while you move your mouse)"),Ja.set("text","Automatically rerolling in a moment"),O("new",f?void 0:d))}function b(){ma||(d--,1>d?(clearInterval(L),L=null,H()):a())}function c(){A||
ma?$(document.body).removeEvent("mousemove",c):(L&&(clearInterval(L),L=null),l&&(clearTimeout(l),l=null),f=!0,a(),l=setTimeout(function(){l=null;f=!1;a();!L&&(!A&&!ma)&&(L=setInterval(b,1E3))},200))}var d=1,A=!I||C(),e=!1,f=!1,g=new Element("div",{styles:{"vertical-align":"middle"}}),Ja=new Element("span");g.grab(Ja);g.appendText(" ");var ja=new Element("input");ja.set("type","button");ja.set("value","Stop");C=function(){A||(null!==L&&(clearInterval(L),L=null),A=!0,$(document.body).removeEvent("mousemove",
c),a())};ja.addEvent("click",function(){C()});g.grab(ja);var B=new Element("span");g.grab(B);var S=new Element("label");S.setStyle("color","black");S.setStyle("font-weight","normal");var h=new Element("input");h.set("type","checkbox");h.set("checked",I);h.addEvent("change",function(){var a=h.checked;aurrp=a;Cookie.write("aurrp",a?"1":"0",{duration:365,domain:document.domain,path:"/"})});S.grab(h);S.appendText(" Auto-reroll next time");a();v(g,!1,!1);var k=g.getSize().y+"px";g.setStyle("height",k);
g.setStyle("line-height",k);if(!A){L=setInterval(b,500);var l=null;$(document.body).addEvent("mousemove",c)}}function f(){var a;(a=e?Pa:currentAffiliate)&&g(a)}function g(b){b=D(b.variants,b);a&&b.videoMode?b=$merge(b,b.videoMode):!a&&b.textMode&&(b=$merge(b,b.textMode));var c=a?"video":"text";b.trackCode&&(c=b.trackCode);b.baseTrackCode&&(c=b.baseTrackCode+"-"+c);var d,A=new Element("span"),e=b.url.replace(/\$/g,c),w=new Element("a",{href:e,target:"_blank",events:{click:function(a){null!==C&&C()}}});
w.setStyles({"text-decoration":"none"});b.image&&(c=new Element("img",{src:b.image,alt:""}),c.setStyles({border:"0 none","vertical-align":"middle"}),w.grab(c),w.appendText(" "));b.text&&(c=new Element("span"),c.setStyles({color:"black","text-decoration":"none","font-weight":"normal",background:"#EEE",padding:"0.25em 0.5em","vertical-align":"middle","border-radius":"0.5em","-moz-border-radius":"0.5em","-webkit-border-radius":" 0.5em",border:"1px solid #CCC"}),c.style.lineHeight="1.5",b.style&&c.setStyles(b.style),
c.set("text",b.text),w.grab(c));A.grab(w);var f=new Element("span");f.set("html","&times;");f.setStyles({cursor:"default",color:"black","font-weight":"bold"});f.addEvent("click",function(){currentAffiliate=null;d.destroy()});b.noCloseButton||(A.appendText(" "),A.grab(f));c=new Element("div");c.setStyle("cursor","pointer");c.addEvent("click",function(a){a=$(a.target);!w.hasChild(a)&&!(w===a||f===a||f.hasChild(a))&&window.open(e,"_blank")});c.grab(A);d=y(c);if(b.bottomPositioning||void 0===b.bottomPositioning)d.setStyle("height",
c.getSize().y+"px"),c.setStyles({position:"absolute",bottom:"0.5em"});return!0}if(!oa){oa=!0;chatOddEven=!chatOddEven;S();newChatButton.removeEvents();null!==unmonSexyButton&&unmonSexyButton.removeEvents();null!==unmonGayButton&&unmonGayButton.removeEvents();resetFlashCallbacks();q();ua=!0;initialLogIsRecaptcha&&("undefined"!==typeof Recaptcha&&Recaptcha.destroy(),W.dispose(),W=null,initialLogIsRecaptcha=!1);P&&(P.destroy(),P=null);for(var B=0;B<ib.length;B++)ib[B].dispose();mots=[];if(a){if($("flash")&&
$("flash").stopChat)try{$("flash").stopChat()}catch(l){}X=setTimeout(function(){X=null;K()},12E4)}xa&&clearTimeout(xa);!a&&!IS_MOBILE&&(qa.setStyle("margin-right",0),Y.setStyle("margin-right",0),(new Fx.Tween(qa,{duration:"short"})).start("margin-right",0,"168px"),(new Fx.Tween(Y,{duration:"short"})).start("margin-right",0,"168px"),$("adwrapper2")&&($("adwrapper2").setStyle("margin-left","160px"),(new Fx.Tween($("adwrapper2"),{duration:"short"})).start("margin-left","160px",0)),setTimeout(u,300));
$(document.body).removeClass("inconversation");t.set("disabled",!0);t.addClass("disabled");ha.set("disabled",!0);t.blur();ha.blur();O("new");window.onbeforeunload=null;$(window).removeEvent("unload",Q);stopped=!0;la.get("html");var m=null;if(document.createRange&&(window.getSelection||document.getSelection))m=document.createRange(),m.selectNodeContents(la);ya&&(na=makeSpyOptionsForm(H,b,d),y(na.form),IS_MOBILE||na.focus());var n=new Element("div",{"class":"newchatbtnwrapper"});newChatButton.addEvent("click",
function(){H()});n.grab(newChatButton);var p=!0;c||b?(A("text"),A("video")):a?(A("text"),e||A("unmoderated section")):A("video");(!IS_MOBILE||!p)&&v(n,!1,!1);Qa&&R();if(!c&&!b){var r=new Element("div",{"class":"logtopicsettings"}),s=new Element("form",{styles:{margin:0,padding:0}}),h=new Element("label"),B=function(){F.checked?setShouldUseEnglish(!0):setShouldUseEnglish(!1)},k=new Element("input",{type:"radio",name:"language",value:"mylang",checked:!shouldUseEnglish});k.addEvent("click",B);h.grab(k);
h.appendText(" My language");s.grab(h);s.appendText(" ");var h=new Element("label"),F=new Element("input",{type:"radio",name:"language",value:"english",checked:shouldUseEnglish});F.addEvent("click",B);h.grab(F);h.appendText(" English");s.grab(h);s.setStyle("display","none");r.grab(s);var ca=function(){!IS_MOBILE||!navigator.language||"EN"===navigator.language.substr(0,2).toUpperCase()||E.get("checked")?s.setStyle("display","none"):s.setStyle("display","block")},B=makeShouldUseLikesCheckbox(),E=B.getElement(".shoulduselikescheckbox");
E.addEvent("click",ca);ca();r.grab(B);B=new Element("a",{href:"javascript:",text:"(Settings)"});!shouldUseFbLikes&&!topicManager.list().length&&(E.set("checked",!1),E.set("disabled",!0),B.set("text","(Enable)"));B.addEvent("click",function(a){a.preventDefault();null!==C&&C();s.dispose();r.empty();a=makeTopicSettings();r.grab(s);r.grab(a);a.getElement("input").focus();E=a.getElement(".shoulduselikescheckbox");E.addEvent("click",ca);G&&G.dispose()});r.appendText(" ");r.grab(B);if(collegeAndAuth){var G=
makeCollegeCheckboxes(!1);r.grab(G)}else G=null;y(r)}B=new Element("div",{"class":"logsavelinks"});h=new Element("span",{"class":"conversationgreat"});IS_MOBILE?h.set("text","Great chat? Save the log!"):h.set("text","Great chat?");h.addEvent("click",function(){x()});B.grab(h);h=[];k=new Element("a");k.set("text","Get a link");k.set("href","javascript:");k.addEvent("click",function(a){a.preventDefault();x()});h.push(k);null!==m&&!IS_MOBILE&&(k=new Element("a",{href:"javascript:",text:"Select all"}),
k.addEvent("click",function(a){a.preventDefault();a=window.getSelection?window.getSelection():document.getSelection();a.removeAllRanges();a.addRange(m)}),h.push(k));var k=[],z=new Element("a",{href:"javascript:",text:"Facebook"});z.addEvent("click",function(a){a.preventDefault();x({facebook:1})});k.push(z);z=new Element("a",{href:"javascript:",text:"Tumblr"});z.addEvent("click",function(a){a.preventDefault();x({tumblr:1})});k.push(z);z=new Element("a",{href:"javascript:",text:"Twitter"});z.addEvent("click",
function(a){a.preventDefault();a=screen.height;var b=Math.round(screen.width/2-275),c=0;420<a&&(c=Math.round(a/2-210));window.open("","intent","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,left="+b+",top="+c);x({tweet:1},{target:"intent"})});k.push(z);z=new Element("a",{href:"javascript:",text:"reddit"});z.addEvent("click",function(a){a.preventDefault();x({reddit:1})});k.push(z);IS_MOBILE||(B.appendText(" Save the log: "),B.grab(middotify(h)),B.appendText(" \u2022\u00a0Or post log to: "),
B.grab(middotify(k)));var I=aurrp;ya||Oa&&hb?v(B,!1,!1):a&&w();c&&!Oa&&v("Please try to discuss the question, not just disconnect!");f();if(mobileAdWrapper){var J=new Element("div",{styles:{width:mobileAdWrapperSize.x+"px",height:mobileAdWrapperSize.y+"px"}});v(J);ga=function(){mobileAdWrapper.setStyles({display:"block",position:"absolute"});mobileAdWrapper.setPosition(J.getPosition())};ga();$(window).addEvent("resize",ga)}}}function ra(a){var b=new Element("iframe");b.setStyle("border","0 none");
b.setStyle("padding",0);b.set("width",318);F(b);initialLogIsRecaptcha=!0;var c=b.contentWindow?b.contentWindow.document:b.contentDocument;b.addEvent("load",function(){var a=c.getElementById("theform");a&&(b.height=a.offsetHeight);(a=c.getElementById("recaptcha_response_field"))&&a.focus()});c.open();c.write('<script type="application/javascript">var RecaptchaOptions = {theme: "white"};\x3c/script>');c.write('<style type="text/css">html, body, form { margin: 0; padding: 0; }</style>');c.write('<form id="theform">');
c.write('<script type="text/javascript" src="http://www.google.com/recaptcha/api/challenge?k='+encodeURIComponent(a)+'">\x3c/script>');c.write('<div style="padding-top: 0.5em"><input type="submit" value="Submit"></div>');c.write("</form>");c.close();b.height=c.getElementById("theform").offsetHeight;$(c.getElementById("theform")).addEvent("submit",function(a){a.preventDefault();a=c.getElementById("recaptcha_challenge_field").value;var b=c.getElementById("recaptcha_response_field").value;l.submitRecaptcha(a,
b);setTimeout(function(){h("Verifying...")},0)})}function z(a){ra(a);"undefined"!==typeof _gaq&&_gaq.push(["_trackEvent","CAPTCHA","CAPTCHA shown"])}function Q(){!l.stopped&&!oa&&(l.disconnect(),v("You have disconnected.",!1),G())}function za(){return"Leaving this page will end your conversation."}function w(){if(!V.get("disabled"))switch(jb){case "disconnect":O("really");!t.get("disabled")&&!IS_MOBILE&&t.focus();break;case "really":Q();break;case "new":H()}}function O(a,b){var c;switch(a){case "disconnect":c=
"Stop";break;case "really":c="Really?";break;case "new":c="New"}void 0!==b&&(c+="...");V.set("text",c);V.grab(new Element("div",{"class":"btnkbshortcut",text:"Esc"}));jb=a;sa.removeClass("reallybtn");"new"===a?sa.addClass("newbtn"):"really"===a&&sa.addClass("reallybtn")}function S(){}function ca(){null!==T&&(clearTimeout(T),T=null);IS_MOBILE||t.focus();var a=t.value;if(a){t.value="";if(IS_MOBILE){var b=t.clone();b.replaces(t);t=b;t.addEvent("focus",function(){u()})}else t.focus();Ra="";k("you",a);
l.sendMessage(a);O("disconnect")}}function yb(){T=null;l.stopTyping()}$("appstore")&&$("appstore").destroy();$("footer")&&$("footer").destroy();f&&shouldForceUnmonitored&&(e=!0);mobileAdWrapper&&mobileAdWrapper.setStyle("display","none");stopFlashing();IS_MOBILE||startSpinner();var cb=new Date,ya="string"===typeof b,Oa=!1,hb=!1;$(document.body).addClass("inconversation");a?$(document.body).addClass("videochat"):$(document.body).removeClass("videochat");var va=new Element("div",{"class":"chatbox3"}),
kb=new Element("div",{"class":"chatbox2"}),Sa=new Element("div",{"class":"chatbox"});IS_MOBILE&&va.grab(logoElt);var Y=new Element("div",{"class":"logwrapper",styles:{top:contentTop+"px"}}),Ta=new Element("div",{"class":"logbox"}),la=new Element("div");IS_MOBILE||la.setStyles({position:"relative","min-height":"100%"});Ta.grab(la);Y.grab(Ta);var zb=new Element("div",{"class":"logwrapperpush"});Y.grab(zb);Sa.grab(Y);var qa=new Element("div",{"class":"controlwrapper"}),lb=new Element("table",{"class":"controltable",
cellpadding:"0",cellspacing:"0",border:"0"}),mb=new Element("tbody"),Aa=new Element("tr"),Ua=new Element("td",{"class":"disconnectbtncell"}),sa=new Element("div",{"class":"disconnectbtnwrapper"}),V=new Element("button",{"class":"disconnectbtn"});sa.grab(V);Ua.grab(sa);Aa.grab(Ua);var nb=new Element("td",{"class":"chatmsgcell"}),Va=new Element("div",{"class":"chatmsgwrapper"});if(IS_MOBILE){var Ba=new Element("form");Ba.setStyles({margin:0,padding:0});Ba.addEvent("submit",function(a){a.preventDefault();
ca()});var t=new Element("input",{"class":"chatmsg disabled",disabled:!0,placeholder:"Type your message..."});t.addEvent("focus",function(){u()});Ba.grab(t);Va.grab(Ba)}else t=new Element("textarea",{"class":"chatmsg disabled",cols:"80",rows:"3",disabled:!0}),Va.grab(t);nb.grab(Va);Aa.grab(nb);var ob=new Element("td",{"class":"sendbthcell"}),pb=new Element("div",{"class":"sendbtnwrapper"}),ha=new Element("button",{"class":"sendbtn",disabled:!0,text:"Send"});ha.grab(new Element("div",{"class":"btnkbshortcut",
text:"Enter"}));pb.grab(ha);ob.grab(pb);IS_MOBILE||Aa.grab(ob);mb.grab(Aa);lb.grab(mb);qa.grab(lb);Sa.grab(qa);kb.grab(Sa);va.grab(kb);$(document.body).grab(va);$(document.body).scrollTop=$(document.body).scrollHeight;var ga=null,Ka=null,M=null,La=null,Ma=null;IS_MOBILE?($(document.body).addEvent("scroll",p),$(document).addEvent("scroll",p)):($(document).addEvent("keydown",g),$(document).addEvent("keyup",r));var l=new MetaBackend;scrollElt=IS_MOBILE?document.body:Ta;for(var ka=[],ua=!1,Ca=[{topics:["reddit"],
regex:/reddit/,url:"http://wawadmin.omegle.com/redir/reddit",text:"Psst... did you know Omegle has its own subreddit?",image:"/static/redditalien.png"}],Pa=null,Z=0;Z<Ca.length;Z++){var N=Ca[Z];N.priority||(N.priority=Z);m(N)}Pa&&m(Pa);if(isFirstChat){for(Z=0;Z<Ca.length;Z++)if(N=Ca[Z],N.topics)for(var Wa=0;Wa<N.topics.length;Wa++)if(topicManager.check(N.topics[Wa])){if(!IS_MOBILE||!N.noMobile)if(null===currentAffiliate||currentAffiliate.priority<N.priority)currentAffiliate=D(N.tests,N);break}isFirstChat=
!1}var gb=null,fb=null,ba=[],W=null,ib=[],ma=!1;if($("logo")||logoElt)($("logo")||logoElt).addEvent("click",fa),($("logo")||logoElt).setStyle("cursor","pointer");var X=null,L=null,na=null,C=function(){C=function(){return!0};return!1},oa=!1;l.addEvent("connectedToServer",function(){V.set("disabled",!1);window.onbeforeunload=za;$(window).addEvent("unload",Q)});l.addEvent("failedToConnect",function(a){h("Error connecting to server. Please try again.");G();"undefined"!==typeof _gaq&&_gaq.push(["_trackEvent",
"Omegle connect error",a])});var P=null,da=null,qb=!1,Xa=null;l.addEvent("waiting",function(){Xa=+new Date;serverManager.setKnownGood();if(ya)h("Looking for two strangers...");else{var a=new Element("div"),b=new Element("div",{text:"Looking for someone you can chat with..."});a.grab(b);if(Da){P=new Element("div",{"class":"commonlikescancel",text:"It may take a little while to find someone with common interests. If you get tired of waiting, you can "});var b=new Element("a",{href:"javascript:",text:"connect to a completely random stranger"}),
c=function(){da&&(clearTimeout(da),da=null);P&&(l.stopLookingForCommonLikes(),P.destroy(),P=null)};b.addEvent("click",c);P.grab(b);P.appendText(" instead.");a.grab(P);da=setTimeout(function(){qb=!0;c()},1E4)}h(a)}});var db=!1;l.addEvent("strangerConnected",function(b){if(!oa){null!==Xa&&1E3<+new Date-Xa&&startFlashing();db=!0;serverManager.setKnownGood();if(a)try{$("flash").gotStrangerPeerID(b)}catch(c){try{$("flash").gotStrangerPeerID(b)}catch(d){}}da&&(clearTimeout(da),da=null);ya?h("You're now watching two strangers discuss your question!",
"You're watching two strangers discuss your question on Omegle!"):(b=new Date,b=11===b.getMonth()&&25===b.getDate()?"merry Christmas":"hi",h("You're "+(IS_MOBILE?"":"now ")+"chatting with a random stranger. Say "+b+"!","You're chatting with a random stranger on Omegle!"),qb&&v("Omegle couldn't find anyone who shares interests with you, so this stranger is completely random. Try adding more interests!",!1,!1,!1),t.set("disabled",!1),t.removeClass("disabled"),ha.set("disabled",!1),IS_MOBILE||t.focus())}});
l.addEvent("gotMessage",function(a){J();a=a.replace(/^[\r\n]+/g,"");navigator.notification&&navigator.notification.beep&&navigator.notification.beep(1);k("stranger",a)});l.addEvent("gotMessageHTML",function(a){J();var b=new Element("p",{"class":"strangermsg"}),c=new Element("strong",{"class":"msgsource"});c.appendText("Stranger: ");b.grab(c);b.appendText(" ");a=new Element("span",{html:a});b.grab(a);y(b);ua||ka.push(["Stranger:",a.get("text")])});l.addEvent("strangerDisconnected",function(){v("Stranger has disconnected.");
G()});l.addEvent("typing",function(){ea("Stranger")});l.addEvent("stoppedTyping",J);l.addEvent("recaptchaRequired",z);l.addEvent("recaptchaRejected",z);l.addEvent("connectionDied",function(a){var b="Technical error";a&&(b+=": "+a+" Sorry. :( Omegle understands if you hate it now, but Omegle still loves you.");v(b);serverManager.unsetKnownGood();"undefined"!==typeof _gaq&&_gaq.push(["_trackEvent","Omegle error",a?a:"(error)",l.server]);G()});l.addEvent("question",function(a){var b=new Element("div",
{"class":"question"}),c=new Element("div",{"class":"questionHeading",text:"Question to discuss:"});b.grab(c);c=new Element("div",{"class":"questionText"});c.appendText(a);b.grab(c);ka.push(["Question to discuss:",a]);y(b)});l.addEvent("spyMessage",function(a,b){var c="Stranger 1"===a?"youmsg":"strangermsg";q(a);startFlashing();E(a,c,b)});l.addEvent("spyDisconnected",function(a){v(a+" has disconnected");G()});l.addEvent("spyTyping",ea);l.addEvent("spyStoppedTyping",q);l.addEvent("error",function(a){v(a);
G()});var eb=!1;l.addEvent("serverMessage",function(a){-1!==a.indexOf("language")&&(eb=!0,!IS_MOBILE&&"undefined"!==typeof googTr&&(a+=' (Select "English" from the menu in the corner to disable.)'));v(a,!1)});l.addEvent("antinudeBanned",function(a){v("Banned.");G();null!==C&&C();top.location.href=a});var Ya=null,aa=null;l.addEvent("commonLikes",function(a){if(a.length){aa=a;a="You both like ";for(var b=0;b<aa.length;b++)a+=aa[b],b<aa.length-1&&(a+=", "),b==aa.length-2&&(a+="and ");a+=".";Ya&&Ya.destroy();
Ya=v(a)}});l.addEvent("partnerCollege",function(a){v("Stranger's college: "+a)});var Na=null;l.addEvent("identDigests",function(a){Na=a});var jb="disconnect";ha.addEvent("click",ca);O("disconnect");V.addEvent("click",w);var Qa=!1,pa,wa;!function(){if(Qa)return!0;if(IS_MOBILE||!e)return!1;Qa=!0;pa=new Element("td",{"class":"lowersexybtncell"});var b=new Element("div",{"class":"lowersexybtnwrapper"}),c="unmon-lower-"+(shouldForceUnmonitored?"":"not")+"forced-",c=c+(a?"video":"text"),d=new Element("button",
{"class":"lowersexybtn",text:"Pervy Girls (Free, 18+)",events:{click:function(a){a.preventDefault();C&&C();window.open("http://wawadmin.omegle.com/redir/y?track="+c)}}});b.grab(d);pa.grab(b);Ua.grab(pa,"after");wa=new Element("td",{"class":"lowergaybtncell"});var b=new Element("div",{"class":"lowergaybtnwrapper"}),w=new Element("button",{"class":"lowergaybtn",text:"\u00a0gay cams\u00a0 (free"+(e?"":", 18+")+")",events:{click:function(a){a.preventDefault();C&&C();window.open("http://wawadmin.omegle.com/redir/gay?track="+
c)}}});b.grab(w);wa.grab(b);pa.grab(wa,"after");"undefined"===typeof doUnmonSexyTest&&(doUnmonSexyTest=0.5>Math.random());c+="-none-"+(doUnmonSexyTest?"y":"n");S=function(){var a=["\ud83d\udc8b *soft moan*","adult cams (free)"];a[1]="girl\u00a0cams \u00a0\u00a0(free)\u00a0\u00a0";for(var b=null;"string"!==typeof a;)b=Math.floor(Math.random()*a.length),a=a[b];d.set("text",a);chatOddEven?(a=w,b=d):(a=d,b=w);var c="0 0 40px 10px #F0F inset",c="";a.setStyles({"box-shadow":c,"-webkit-box-shadow":c,"-moz-box-shadow":c,
background:"red",background:"#FF7F00"});lastActiveUnmonSexy=a;b.setStyles({"box-shadow":"none","-webkit-box-shadow":"none","-moz-box-shadow":"none","font-weight":"normal",background:"white",color:"black"})};S();return!0}()&&!e&&chatPervTrack.push(!1);"undefined"===typeof doAVCtest&&(doAVCtest=0.5>Math.random());if(e&&a){if(!$("abovevideosexybtn")){var rb=new Element("div",{styles:{background:"red",color:"white","font-size":"30px",height:"30px","line-height":"30px","vertical-align":"middle",cursor:"pointer",
"text-align":"center",padding:"10px 0","margin-bottom":"10px","border-radius":"20px"},id:"abovevideosexybtn",events:{click:function(a){a.preventDefault();C&&C();window.open("http://wawadmin.omegle.com/redir/y?track=avc-108-"+(doAVCtest?"y":"n"))}}});rb.appendText("What happens if click?");$("flashwrapper").grab(rb,"top")}}else $$("#abovevideosexybtn").dispose();if(a){var Ea=function(a){var b=$("flash");if(Y.getSize&&b.getPosition&&$(window).getSize){var c=$(window).getSize(),d=520*Y.getSize().y/488,
e=c.y-b.getPosition().y-24;d>e&&(d=e,!0!==a&&setTimeout(function(){Ea(!0)},200));320>d&&(d=320);a=320*d/520;a>c.x/2&&(a=c.x/2,d=520*a/320);b.setStyles({width:Math.floor(a)+"px",height:Math.floor(d)+"px"});b.blur();(new Elements([qa,Y])).setStyle("margin-left",a+8+"px")}};Ea();$(window).addEvent("resize",Ea);ga=Ea}var Ra=t.value,T=null;t.addEvent("keydown",function(a){13==a.code&&(!a.shift&&!a.alt&&!a.meta)&&(ca(),a.preventDefault())});t.addEvent("keypress",function(a){setTimeout(function(){t.value!==
Ra&&(Ra=t.value,null===T&&l.typing(),null!==T&&(clearTimeout(T),T=null),T=setTimeout(yb,5E3))},0)});h("Connecting to server...");var ta=null,Da=!1,Fa=[],xa=null,Za=null,Ga=null,$a=!1;if(!c&&!b&&!e){if(shouldUseLikes){if(shouldUseFbLikes)var sb=FB.getAuthResponse(),ta=sb?sb.accessToken:null;Fa=topicManager.list();Da=Fa.length||null!==ta}"none"!==collegeMode&&collegeAndAuth&&($a="any"===collegeMode,Za=collegeAndAuth[0],Ga=collegeAndAuth[1])}"undefined"!==typeof _gaq&&_gaq.push(["_trackEvent","Omegle chat",
function(){var d=[];IS_MOBILE&&d.push("mobile");b?d.push("spy"):c?d.push("spyee"):a?(d.push("video"),flashWatermarkTrack&&d.push(flashWatermarkTrack)):d.push("text");e&&(d.push("unmonitored"),shouldForceUnmonitored&&d.push("(forced)"));Da&&(d.push("topical"),ta&&d.push("(FB)"));"none"!==collegeMode&&Ga&&d.push("college");d[0]=d[0][0].toUpperCase()+d[0].substr(1);return d.join(" ")}()]);if(e){"undefined"===typeof unmonChatCount&&(unmonAdCount=unmonChatCount=0);if(1>unmonAdCount&&4<=unmonChatCount){unmonAdCount++;
var tb=0.5>Math.random(),Ha="gwfy9-"+(tb?"y":"n"),ab=new Element("div",{styles:{width:"40em",border:"1px solid #3F9FFF","border-top-left-radius":"0.5em","border-top-right-radius":"0.5em",overflow:"hidden"}}),ub=function(){bb("accept");window.open("http://wawadmin.omegle.com/redir/y?track=interchat-"+Ha)},bb=function(a){(new Image).src="http://wawadmin.omegle.com/redir/interchatexit?track="+a+"-"+Ha},Ab=new Element("div",{styles:{background:"#3F9FFF",color:"white","font-size":"1.5em",padding:"0.3333em",
"font-weight":"bold","text-align":"center","text-shadow":"0 0 15px #3F3F3F","-webkit-text-shadow":"0 0 15px #3F3F3F","-moz-text-shadow":"0 0 15px #3F3F3F",cursor:"pointer"},events:{click:ub},text:tb?"A girl wants you":"Girls want you"});ab.grab(Ab);var ia=new Element("div",{styles:{padding:"0.5em",position:"relative",overflow:"hidden"}});ia.setStyle("padding-bottom","3.5em");var Bb=new Element("div",{html:""});ia.grab(Bb);var vb=new Element("div",{styles:{position:"absolute",right:0,bottom:0,"border-top":"1px solid #3F9FFF",
"border-left":"1px solid #3F9FFF",padding:"0.5em","text-align":"center",cursor:"pointer",height:"1em",position:"absolute",background:"white",color:"black"},events:{click:function(){bb("refuse");H()}}}),Cb=new Element("span",{text:"No",styles:{"vertical-align":"middle"}});vb.grab(Cb);var wb=new Element("div",{styles:{position:"absolute",bottom:0,left:0,background:"#3F9FFF",padding:"0.5em","text-align":"center",color:"white",cursor:"pointer",height:"1.5em","border-top":"1px solid #3F9FFF","border-right":"1px solid #3F9FFF",
width:"15.25em","z-index":"1","border-top-right-radius":"0.5em"},events:{click:ub}}),Db=new Element("span",{text:"Give me girls",styles:{"font-size":"1.5em","vertical-align":"middle","text-shadow":"0 0 15px #3F3F3F","-webkit-text-shadow":"0 0 15px #3F3F3F","-moz-text-shadow":"0 0 15px #3F3F3F"}});wb.grab(Db);ia.grab(vb);ia.grab(wb);var xb=new Element("div",{styles:{position:"absolute",bottom:0,left:"15.75em",background:"#FF7F00",padding:"0.5em 0.5em 0.5em 1em","text-align":"center",color:"white",
cursor:"pointer",height:"1.5em","border-top":"1px solid #FF7F00","border-right":"1px solid #FF7F00",width:"15.25em","border-top-right-radius":"0.5em","z-index":"0"},events:{click:function(){bb("gayaccept");window.open("http://wawadmin.omegle.com/redir/gay?track=interchat-"+Ha)}}}),Eb=new Element("span",{text:"Free gay cams",styles:{"font-size":"1.5em","vertical-align":"middle","text-shadow":"0 0 15px #7F7F7F","-webkit-text-shadow":"0 0 15px #7F7F7F","-moz-text-shadow":"0 0 15px #7F7F7F"}});xb.grab(Eb);
ia.grab(xb);ab.grab(ia);F(ab);V.set("disabled",!0);(new Image).src="http://wawadmin.omegle.com/redir/interchatenter?track="+Ha;return}unmonChatCount++}var Ia=null;if(!shouldUseEnglish||Da)"undefined"!==typeof googTr&&googTr.c&&"string"===typeof googTr.c&&2<=googTr.c.length?Ia=googTr.c.substr(0,2):"undefined"!==typeof navigator&&"string"===typeof navigator.language&&(Ia=navigator.language.substr(0,2));if(a){flashCb_gotNearID=function(a,b){resetStratusCallbacks();l.connect(a,null,!1,!1,ta,Fa,e?"unmon":
null,Ia,b,!1,Za,Ga,$a)};flashCb_errorConnectingToStratus=function(){resetStratusCallbacks();h("Error connecting to Adobe Stratus. Please try again.");G()};try{$("flash").startChat(rtmfpServer)}catch(Fb){try{$("flash").startChat(rtmfpServer)}catch(Gb){G(),H(!1)}}e||(xa=setTimeout(function(){xa=null;var a=new Date;lastScreenshotTime&&6E4>a-lastScreenshotTime||(lastScreenshotTime=a,Math.random()>screenshotPercent||$("flash")&&($("flash").postScreenshot&&antinudeServers.length)&&$("flash").postScreenshot(antinudeServers[$random(0,
antinudeServers.length-1)],4,300))},$random(1500,5E3)))}else l.connect(null,b,c,d,ta,Fa,e?"unmon":null,Ia,null,!1,Za,Ga,$a);serverManager.unsetKnownGood()}var userMedia=null,WEB_RTC_CONFIG={iceServers:[{url:"stun:stun.services.mozilla.com"}]},WEB_RTC_MEDIA_CONSTRAINTS={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},WEB_RTC_PEER_CONSTRAINTS={optional:[{DtlsSrtpKeyAgreement:!0}]};window.RTCPeerConnection=window.mozRTCPeerConnection||window.webkitRTCPeerConnection;
window.RTCIceCandidate=window.mozRTCIceCandidate||window.RTCIceCandidate||window.webkitRTCIceCandidate;window.RTCSessionDescription=window.mozRTCSessionDescription||window.RTCSessionDescription||window.webkitRTCSessionDescription;navigator.getUserMedia=navigator.mozGetUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia;var logoShadowImg=null;
function requestFullscreen(a){a=a||document.documentElement;a.requestFullscreen?a.requestFullscreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen()}
function startMobileVideo(){function a(a){a.preventDefault();for(var b=0;b<a.changedTouches.length;b++){var c=a.changedTouches[b];if(c.identifier===J){if(H){a=c.pageX-q.clientWidth/2;var b=D.clientWidth,c=q.clientWidth,d=Math.max(b/2,b-300);a=Math.max(d,a);q.setStyle("left",a+"px");q.setStyle("right","auto");k.setStyle("width",b-a-c+"px")}else a=c.pageY-q.clientHeight/2,b=D.clientHeight,c=q.clientHeight,d=Math.max(b/2,b-300),a=Math.max(d,a),q.setStyle("top",a+"px"),q.setStyle("bottom","auto"),k.setStyle("height",
b-a-c+"px");b-a>2.5*c&&h.setStyle("display","none");ea=a<=d;break}}}function b(c){c.preventDefault();for(var d=0;d<c.changedTouches.length;d++)if(c.changedTouches[d].identifier===J){U=setTimeout(function(){U=null;h.setStyle("display","none");y.set("display",fa)},500);q.setStyle("background","rgba(255, 0, 0, 0.5)");H?(q.setStyle("left","auto"),q.setStyle("right",0),k.setStyle("width",0)):(q.setStyle("top","auto"),q.setStyle("bottom",0),k.setStyle("height",0));k.setStyle("display","none");window.removeEventListener("touchmove",
a);window.removeEventListener("touchend",b);J=null;ea&&u();break}}function c(){var a=D.getSize();a.x>a.y?(H=!0,q.setStyles({left:"auto",bottom:"auto",right:0,top:"33.33%",width:"3em",height:"33.33%","border-top-left-radius":"1em","border-bottom-left-radius":"1em","border-top-right-radius":0,"border-bottom-right-radius":0}),k.setStyles({left:"auto",bottom:"auto",right:0,top:"33.33%",width:"0",height:"33.33%"})):(H=!1,q.setStyles({top:"auto",right:"auto",bottom:0,left:"33.33%",height:"3em",width:"33.33%",
"border-top-left-radius":"1em","border-bottom-left-radius":0,"border-top-right-radius":"1em","border-bottom-right-radius":0}),k.setStyles({top:"auto",right:"auto",bottom:0,left:"33.33%",height:0,width:"33.33%"}))}function d(a){for(var b=a.split("\r\n"),c=0;c<b.length;c++)if(-1!==b[c].search("m=audio")){var d=c;break}if(null===d)return a;for(c=0;c<b.length;c++)if(-1!==b[c].search("opus/48000")){var f=e(b[c],/:(\d+) opus\/48000/i);if(f){a=b;for(var c=d,g=b[d].split(" "),h=[],k=0,m=0;m<g.length;m++)3===
k&&(h[k++]=f),g[m]!==f&&(h[k++]=g[m]);f=h.join(" ");a[c]=f}break}a=b[d].split(" ");for(c=b.length-1;0<=c;c--)if(f=e(b[c],/a=rtpmap:(\d+) CN\/\d+/i))f=a.indexOf(f),-1!==f&&a.splice(f,1),b.splice(c,1);b[d]=a.join(" ");return a=b.join("\r\n")}function e(a,b){var c=a.match(b);return c&&2==c.length?c[1]:null}function f(a){a.sdp=d(a.sdp);K.setLocalDescription(a,function(){z.sendRTCPeerDescription(a)},p)}function n(){if(!ra){ra=!0;try{K.close()}catch(a){}m.dispose();q.setStyle("display","none");k.setStyle("display",
"none");fa="table";y.setStyle("display","table");var b=new Element("span",{styles:{padding:"0.5em",background:"#007fff",color:"white","font-weight":"bold","border-radius":"0.5em","-webkit-border-radius":"0.5em"},text:">> New chat >>",events:{click:function(){g();startMobileVideo()}}}),b=(new Element("div",{styles:{height:"3em","line-height":"3"}})).grab(b);v.grab(b);if(mobileAdWrapper&&mobileAdWrapperSize&&mobileAdWrapperSize.y){var c=new Element("div",{styles:{width:mobileAdWrapperSize.x+"px",height:mobileAdWrapperSize.y+
"px",margin:Math.floor(mobileAdWrapperSize.y/4)+"px auto"}});v.grab(c);mobileAdWrapper.setStyles({position:"absolute",display:"block",background:"red","z-index":"1000"});mobileAdWrapper.setPosition(c.getPosition());s=function(){mobileAdWrapper.setPosition(c.getPosition())};window.addEvent("resize",s);setTimeout(s,0);setTimeout(s,1);setTimeout(s,10);setTimeout(s,100)}b=new Element("a",{text:"(Back to homepage)",href:"javascript:",events:{click:function(a){a.preventDefault();g();showIntro()}},styles:{color:"#3f9fff"}});
b=(new Element("div",{styles:{"margin-top":mobileAdWrapper&&mobileAdWrapperSize&&mobileAdWrapperSize.y?0:"1.5em"}})).grab(b);v.grab(b);$(window).removeEvent("unload",u)}}function g(){$(window).removeEvent("resize",c);s&&$(window).removeEvent("resize",s);D.dispose()}function r(a){ra||(F.set("text",a),za&&z.disconnect(),n())}function p(a){r("Connection error. :-(")}function u(){r("You disconnected.")}function x(){I.src=window.URL&&URL.createObjectURL?URL.createObjectURL(userMedia):userMedia;K.addStream(userMedia);
F.set("text","Connecting...");za=!0;z.connect(null,null,!1,!1,null,null,null,null,null,!0)}$("header")&&(savedHeader=$("header"),$("header").dispose());$("intro")&&(savedIntro=$("intro"),$("intro").dispose());$("footer")&&$("footer").dispose();$("mobileadwrapper")&&$("mobileadwrapper").setStyle("display","none");var s=null,D=new Element("div",{styles:{background:"black",width:"100%",height:"100%",position:"relative",overflow:"hidden"}}),m=new Element("video",{autoplay:!0,styles:{position:"absolute",
left:0,top:0,width:"100%",height:"100%",background:"black"}});D.grab(m);var I=new Element("video",{autoplay:!0,muted:!0,styles:{position:"absolute",left:0,bottom:0,width:"100px",height:"100px"}});D.grab(I);var y=new Element("div",{styles:{display:"table",position:"absolute",width:"100%",height:"100%"}}),v=new Element("div",{styles:{display:"table-cell",width:"100%",height:"100%","vertical-align":"middle","text-align":"center",color:"white","font-size":"2em"}}),F=new Element("div",{styles:{"text-shadow":"white 0 0 0.5em"}});
v.grab(F);y.grab(v);D.grab(y);var h=new Element("div",{styles:{position:"absolute",width:"100%",height:"100%",display:"none"}}),E=new Element("div",{styles:{display:"table-cell",width:"100%",height:"100%","text-align":"center","vertical-align":"middle",color:"white","text-shadow":"0 0 0.5em black"},text:"Slide to confirm."});h.grab(E);D.grab(h);var k=new Element("div",{styles:{background:"#7F0000",position:"absolute",display:"none"}});D.grab(k);var q=new Element("div",{styles:{background:"red",color:"white",
position:"absolute",display:"table"}});q.setStyle("background","rgba(255, 0, 0, 0.5)");E=new Element("div",{styles:{display:"table-cell","vertical-align":"middle","text-align":"center"},text:"Stop"});q.grab(E);var J=null,ea=!1,U=null;q.addEventListener("touchstart",function(c){c.preventDefault();q.setStyle("background","red");ea=!1;k.setStyle("display","block");null===J&&(window.addEventListener("touchend",b),window.addEventListener("touchmove",a),h.setStyle("display","table"),y.setStyle("display",
"none"),null!==U&&(clearTimeout(U),U=null));J=c.changedTouches[0].identifier});q.addEvent("click",u);D.grab(q);var H=!0;null===logoShadowImg&&(logoShadowImg=new Element("img",{src:"/static/dotcomlogoshadow"+(window.devicePixelRatio&&1<window.devicePixelRatio?"@2x":"")+".png",width:175,height:49}));D.grab((new Element("div",{styles:{position:"absolute",top:0,left:0,width:"100%","text-align":"center",opacity:"0.5"}})).grab(logoShadowImg));$(document.body).grab(D);requestFullscreen();c();$(window).addEvent("resize",
c);var fa="table",K=new RTCPeerConnection(WEB_RTC_CONFIG,WEB_RTC_PEER_CONSTRAINTS);K.onaddstream=function(a){fa="none";y.setStyle("display","none");stopSlideRequired=!0;m.src=window.URL&&URL.createObjectURL?URL.createObjectURL(a.stream):a.stream;"undefined"!==typeof _gaq&&_gaq.push(["_trackEvent","Omegle chat","WebRTC video"])};var R=[],G=null;K.onicecandidate=function(a){null!==G&&(clearTimeout(G),G=null);a.candidate?(R.push(a.candidate),setTimeout(function(){R.length&&(z.sendICECandidates(R),R=
[]);G=null},300)):R.length&&(z.sendICECandidates(R),R=[])};K.onstatechange=function(){("closing"===K.readyState||"closed"===K.readyState)&&p()};var ra=!1,z=new MetaBackend,Q=!1;z.addEvent("strangerDisconnected",function(){F.set("text","Stranger disconnected.");n()});z.addEvent("icecandidate",function(a){try{K.addIceCandidate(new RTCIceCandidate(a))}catch(b){}});z.addEvent("rtccall",function(){Q=!0;K.createOffer(f,p,WEB_RTC_MEDIA_CONSTRAINTS)});z.addEvent("rtcpeerdescription",function(a){a=new RTCSessionDescription(a);
K.setRemoteDescription(a,function(){Q||setTimeout(function(){K.createAnswer(function(a){f(a)},p,WEB_RTC_MEDIA_CONSTRAINTS)},0)},p)});var za=!1;z.addEvent("connectionDied",p);z.addEvent("failedToConnect",p);$(window).addEvent("unload",u);F.set("text","Enable camera...");null===userMedia?navigator.getUserMedia({video:!0,audio:!0},function(a){userMedia=a;x()},function(a){r("Camera error. :-(")}):x()};
